<!DOCTYPE html>
{% load staticfiles %}
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Training Model</title>

    <meta name="description" content="Source code generated using layoutit.com">
    <meta name="author" content="LayoutIt!">


    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">
    <script src="{% static 'js/jquery.min.js' %}"></script>

    <script>

       var timeout = true;

       $(document).ready(function(){

           $.ajaxSetup({
               data: {csrfmiddlewaretoken: '{{ csrf_token }}' },
           });
           $('#myForm').submit(function(){

               timeout = false;

               var np1 = $("#n_parameter_1").val();
               var np2 = $("#n_parameter_2").val();
               var np3 = $("#n_parameter_3").val();

               var pH = 0;
               var DO = 0;
               var COD = 0;
               var TP = 0;
               var TN = 0;
               var NH4 = 0;

               var opH = $('input:radio[name="opH"]:checked').val();
               var ipH = $('input:radio[name="ipH"]:checked').val();
               var oDO = $('input:radio[name="oDO"]:checked').val();
               var iDO = $('input:radio[name="iDO"]:checked').val();
               var oCOD = $('input:radio[name="oCOD"]:checked').val();
               var iCOD = $('input:radio[name="iCOD"]:checked').val();
               var oTP = $('input:radio[name="oTP"]:checked').val();
               var iTP = $('input:radio[name="iTP"]:checked').val();
               var oTN = $('input:radio[name="oTN"]:checked').val();
               var iTN = $('input:radio[name="iTN"]:checked').val();
               var oNH4 = $('input:radio[name="oNH4"]:checked').val();
               var iNH4 = $('input:radio[name="iNH4"]:checked').val();

               if(opH==null && ipH==true){
                    pH = 1;
               } else if(ipH==null && opH==null){
                    pH = 0;
               } else {pH = -1;}

               if(oDO==null && iDO==true){
                    DO = 1;
               } else if(iDO==null && oDO==null){
                    DO = 0;
               } else {DO = -1;}

               if(oCOD==null && iCOD==true){
                    COD = 1;
               } else if(iCOD==null && oCOD==null){
                    COD = 0;
               } else {COD = -1;}

               if(oTP==null && iTP==true){
                    TP = 1;
               } else if(iTP==null && oTP==null){
                    TP = 0;
               } else {TP = -1;}

               if(oTN==null && iTN==true){
                    TN = 1;
               } else if(iTN==null && oTN==null){
                    TN = 0;
               } else {TN = -1;}

               if(oNH4==null && iNH4==true){
                    NH4 = 1;
               } else if(iNH4==null && oNH4==null){
                    NH4 = 0;
               } else {NH4 = -1;}

               $.ajax({
                   type:"POST",
                   data: {np1:np1, np2:np2, np3:np3, pH:pH, DO:DO, COD:COD, TP:TP, TN:TN, NH4:NH4},
                   url: "{% url 'test' %}",
                   cache: false,
                   dataType: "html",
                   success: function(result, statues, xml){
                       alert(result);
                   },
                   error: function(){
                       alert("false");
                   }
               });
               return false;
           });
       });




       function showMessages()
       {
           if(timeout == true) {

           }

           if(timeout == false) {

               readAsText();

           }
           setTimeout(showMessages,3000);
       }

       function setResult(res){
           var result=document.getElementById("result");
           result.innerHTML = res;
           result.scrollTop = result.scrollHeight;
       }

       function readAsText()
       {
           var np1 = $("#n_parameter_1").val();
           $.ajax({
                type: "POST",
                url: "{% url 'doTemp' %}",
                data: {np1:np1},
                cache: false,
                dataType: "html",
                success: function(result, statues, xml){
                    setResult(result);
                },
                error: function(){

                }
           });
       }

       function changeStatus()
       {
           document.getElementById("o_parameter_1").checked = false;
           document.getElementById("i_parameter_1").checked = false;
           document.getElementById("o_parameter_2").checked = false;
           document.getElementById("i_parameter_2").checked = false;
           document.getElementById("o_parameter_3").checked = false;
           document.getElementById("i_parameter_3").checked = false;
           document.getElementById("o_parameter_4").checked = false;
           document.getElementById("i_parameter_4").checked = false;
           document.getElementById("o_parameter_5").checked = false;
           document.getElementById("i_parameter_5").checked = false;
           document.getElementById("o_parameter_6").checked = false;
           document.getElementById("i_parameter_6").checked = false;
           timeout = true;
       }


       function changeSrc()
       {

           document.getElementById("img1").src = "{% static 'img/Training-Result.png' %}";
           document.getElementById("img2").src = "{% static 'img/Training-Error.png' %}";
           document.getElementById("img3").src = "{% static 'img/Testing-Result.png' %}";
           document.getElementById("img4").src = "{% static 'img/Testing-Error.png' %}";
       }

       function changeStatusForpH(self)
       {
           document.getElementById("o_parameter_1").checked = false;
           document.getElementById("i_parameter_1").checked = false;

           self.checked = true;
       }

       function changeStatusForDO(self)
       {
           document.getElementById("o_parameter_2").checked = false;
           document.getElementById("i_parameter_2").checked = false;

           self.checked = true;
       }

       function changeStatusForCOD(self)
       {
           document.getElementById("o_parameter_3").checked = false;
           document.getElementById("i_parameter_3").checked = false;

           self.checked = true;
       }

       function changeStatusForTP(self)
       {
           document.getElementById("o_parameter_4").checked = false;
           document.getElementById("i_parameter_4").checked = false;

           self.checked = true;
       }

       function changeStatusForTN(self)
       {
           document.getElementById("o_parameter_5").checked = false;
           document.getElementById("i_parameter_5").checked = false;

           self.checked = true;
       }

       function changeStatusForNH4(self)
       {
           document.getElementById("o_parameter_6").checked = false;
           document.getElementById("i_parameter_6").checked = false;

           self.checked = true;
       }

       showMessages();




    </script>
</head>
<body style="overflow:scroll">
<div class="container-fluid">
    <div class="row">
        <div class="col-md-12"><br/><br/><br/>
            <div class="configuration">
                <form id="myForm" role="form">
                    <div class="col-md-1"></div>
                    <div class="col-md-3">
                        <div class="label_group">
                            <label>
                                网络参数
                            </label>
                        </div>
                        </br>
                        <div class="network_parameter">
                            <label for="n_parameter_1">
                                活性阈值
                            </label>
                            <input type="text" class="form-control" id="n_parameter_1" name="np1" value="1.5"/>
                        </div>
                        </br>
                        <div class="network_parameter">
                            <label for="n_parameter_2">
                                训练次数
                            </label>
                            <input type="text" class="form-control" id="n_parameter_2" name="np2" value="20"/>
                        </div>
                        </br>
                        <div class="network_parameter">
                            <label for="n_parameter_3">
                                测试频率
                            </label>
                            <input type="text" class="form-control" id="n_parameter_3" name="np3" value="5"/>
                        </div>
                    </div>

                    <div class="col-md-1"></div>
                    <div class="col-md-6">
                        <div class="label_group">
                            <label>
                                输出参数
                            </label>
                        </div>
                        </br>
                        <div align="center" class="radio_output">
                            <div class="col-md-2">
                                <label>
                                    <input type="radio" id="o_parameter_1" onclick="changeStatusForpH(this)" name="opH" value="-1"/> pH
                                </label>
                            </div>
                            <div class="col-md-2">
                                <label>
                                    <input type="radio" id="o_parameter_2" onclick="changeStatusForDO(this)" name="oDO" value="-1"/> DO
                                </label>
                            </div>
                            <div class="col-md-2">
                                <label>
                                    <input type="radio" id="o_parameter_3" onclick="changeStatusForCOD(this)" name="oCOD" value="-1"/> COD
                                </label>
                            </div>
                            <div class="col-md-2">
                                <label>
                                    <input type="radio" id="o_parameter_4" onclick="changeStatusForTP(this)" name="oTP" value="-1"/> TP
                                </label>
                            </div>
                            <div class="col-md-2">
                                <label>
                                    <input type="radio" id="o_parameter_5" onclick="changeStatusForTN(this)" name="oTN" value="-1"/> TN
                                </label>
                            </div>
                            <div class="col-md-2">
                                <label>
                                    <input type="radio" id="o_parameter_6" onclick="changeStatusForNH4(this)" name="oNH4" value="-1"/> NH3-N
                                </label>
                            </div>
                        </div>
                        </br></br></br></br>
                        <div class="label_group">
                            <label>
                                输入参数
                            </label>
                        </div>
                        </br>
                        <div align="center" class="radio_input">
                            <div class="col-md-2">
                                <label>
                                    <input type="radio" id="i_parameter_1" onclick="changeStatusForpH(this)" name="ipH" value="1"/> pH
                                </label>
                            </div>
                            <div class="col-md-2">
                                <label>
                                    <input type="radio" id="i_parameter_2" onclick="changeStatusForDO(this)" name="iDO" value="1"/> DO
                                </label>
                            </div>
                            <div class="col-md-2">
                                <label>
                                    <input type="radio" id="i_parameter_3" onclick="changeStatusForCOD(this)" name="iCOD" value="1"/> COD
                                </label>
                            </div>
                            <div class="col-md-2">
                                <label>
                                    <input type="radio" id="i_parameter_4" onclick="changeStatusForTP(this)" name="iTP" value="1"/> TP
                                </label>
                            </div>
                            <div class="col-md-2">
                                <label>
                                    <input type="radio" id="i_parameter_5" onclick="changeStatusForTN(this)" name="iTN" value="1"/> TN
                                </label>
                            </div>
                            <div class="col-md-2">
                                <label>
                                    <input type="radio" id="i_parameter_6" onclick="changeStatusForNH4(this)" name="iNH4" value="1"/> NH3-N
                                </label>
                            </div>
                        </div>
                        </br></br></br></br>
                        <div align="center" class="button_group">
                            <div class="col-md-4">
                                <button type="button" onclick="changeStatus()" id="btn"
                                        class="btn btn-block btn-default"
                                        name="reset"
                                        value='reset'>
                                    重置
                                </button>
                            </div>
                            <div class="col-md-4">
                                <button type="submit" id="submit" class="btn btn-block btn-default" name="begin" value='begin'>
                                    开始
                                </button>
                            </div>
                            <div class="col-md-4">
                                <button type="button" onclick="changeSrc()" class="btn btn-block btn-default"
                                        name="result"
                                        value='result'>
                                    结果
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-1"></div>
                </form>
            </div>
            <div class="messages">
                <div class="col-md-12">
                    <div class="col-md-2"></div>
                    <div class="col-md-8">
                        </br>
                        <div class="label_group">
                            <label>
                                训练记录
                            </label>
                        </div>
                        </br>
                        <textarea rows='8' id="result" class="form-control"></textarea>
                    </div>
                    <div class="col-md-2"></div>
                </div>
            </div>
            </br></br>
            <div class="images">
                <div class="col-md-12">
                    <img alt="img1" id="img1" src="{% static 'img/show.png' %}" class="img-responsive center-block">
                    <img alt="img2" id="img2" src="{% static 'img/show.png' %}" class="img-responsive center-block">
                    <img alt="img3" id="img3" src="{% static 'img/show.png' %}" class="img-responsive center-block">
                    <img alt="img4" id="img4" src="{% static 'img/show.png' %}" class="img-responsive center-block">
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>